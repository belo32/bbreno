<!DOCTYPE html>
<!-- saved from url=(0068)https://scotch.io/tutorials/easy-node-authentication-setup-and-local -->
<html itemscope="" itemtype="https://schema.org/" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <script async="" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/analytics.js"></script><script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:1434126030,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok3v=1613a3a185/"},atok:"69fe8730ad5ec28a0930b21daf84c424",petok:"d3c359ab910f293dff8a682029f6cec172c56c11-1434668466-2736",zone:"scotch.io",rocket:"m",apps:{}}];document.write('<script type="text/javascript" src="//ajax.cloudflare.com/cdn-cgi/nexp/dok3v=7e13c32551/cloudflare.min.js"><'+'\/script>');}}catch(e){};
//]]>
</script><script type="text/javascript" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/cloudflare.min.js"></script><style type="text/css"></style><style type="text/css">.cf-hidden { display: none; } .cf-invisible { visibility: hidden; }</style><script data-module="cloudflare/rocket" id="cfjs_block_130b7f15bce" onload="CloudFlare.__cfjs_block_130b7f15bce_load()" onerror="CloudFlare.__cfjs_block_130b7f15bce_error()" onreadystatechange="CloudFlare.__cfjs_block_130b7f15bce_readystatechange()" type="text/javascript" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/rocket.js"></script>
<script type="text/javascript">
var ct_ajaxurl = 'https://scotch.io/wp-admin/admin-ajax.php';
</script>

	<meta charset="UTF-8">
	<!--
	                                 /$$               /$$
	                                | $$              | $$
	  /$$$$$$$  /$$$$$$$  /$$$$$$  /$$$$$$    /$$$$$$$| $$$$$$$  /$$   /$$
	 /$$_____/ /$$_____/ /$$__  $$|_  $$_/   /$$_____/| $$__  $$| $$  | $$
	|  $$$$$$ | $$      | $$  \ $$  | $$    | $$      | $$  \ $$| $$  | $$
	 \____  $$| $$      | $$  | $$  | $$ /$$| $$      | $$  | $$| $$  | $$
	 /$$$$$$$/|  $$$$$$$|  $$$$$$/  |  $$$$/|  $$$$$$$| $$  | $$|  $$$$$$$
	|_______/  \_______/ \______/    \___/   \_______/|__/  |__/ \____  $$
	                                                             /$$  | $$
	                                                            |  $$$$$$/
	                                                             \______/
	                                 /$$               /$$
	                                | $$              | $$
	  /$$$$$$$  /$$$$$$$  /$$$$$$  /$$$$$$    /$$$$$$$| $$$$$$$
	 /$$_____/ /$$_____/ /$$__  $$|_  $$_/   /$$_____/| $$__  $$
	|  $$$$$$ | $$      | $$  \ $$  | $$    | $$      | $$  \ $$
	 \____  $$| $$      | $$  | $$  | $$ /$$| $$      | $$  | $$
	 /$$$$$$$/|  $$$$$$$|  $$$$$$/  |  $$$$/|  $$$$$$$| $$  | $$
	|_______/  \_______/ \______/    \___/   \_______/|__/  |__/



	                                 /$$               /$$
	                                | $$              | $$
	  /$$$$$$$  /$$$$$$$  /$$$$$$  /$$$$$$    /$$$$$$$| $$$$$$$
	 /$$_____/ /$$_____/ /$$__  $$|_  $$_/   /$$_____/| $$__  $$
	|  $$$$$$ | $$      | $$  \ $$  | $$    | $$      | $$  \ $$
	 \____  $$| $$      | $$  | $$  | $$ /$$| $$      | $$  | $$
	 /$$$$$$$/|  $$$$$$$|  $$$$$$/  |  $$$$/|  $$$$$$$| $$  | $$
	|_______/  \_______/ \______/    \___/   \_______/|__/  |__/
	-->
	<title>Easy Node Authentication: Setup and Local | Scotch</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="google-site-verification" content="NoKkRtzSguNO3Xd1cuhpVkUoh7n8mz-aofV9Ch4aS8w">

	<!-- RSS -->
	<link rel="alternate" type="application/rss+xml" title="Scotch - Developers bringing fire to the people." href="https://scotch.io/feed">

	<!-- ICONS/TILES/WHATEVER REALLY NEED A MORE UNIVERSAL STANDARD -->
	<link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="https://scotch.io/favicon.ico">
	<link rel="apple-touch-icon" sizes="57x57" href="https://scotch.io/wp-content/themes/forty/img/icons/favicon-57.png">
	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://scotch.io/wp-content/themes/forty/img/icons/favicon-57.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://scotch.io/wp-content/themes/forty/img/icons/favicon-72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://scotch.io/wp-content/themes/forty/img/icons/favicon-114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://scotch.io/wp-content/themes/forty/img/icons/favicon-120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://scotch.io/wp-content/themes/forty/img/icons/favicon-144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://scotch.io/wp-content/themes/forty/img/icons/favicon-152.png">
	<meta name="application-name" content="Scotch Scotch scotch">
	<meta name="msapplication-TileImage" content="https://scotch.io/wp-content/themes/forty/img/icons/favicon-144.png">
	<meta name="msapplication-TileColor" content="#2A2A2A">

	<!-- MUST PLEASE EVERYONE -->
				
		<!-- SEARCH ENGINES -->
		<meta name="author" content="Chris Sevilleja">
		<meta name="description" content="">
		<link rel="canonical" href="./Easy Node Authentication_ Setup and Local _ Scotch_files/Easy Node Authentication_ Setup and Local _ Scotch.html">

		<!-- THE TWITTER MACHINE -->
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@scotch_io">
		<meta name="twitter:creator" content="sevilayha">
		<meta name="twitter:title" content="Easy Node Authentication: Setup and Local">
		<meta name="twitter:description" content="">
		<meta name="twitter:image:src" content="https://cask.scotch.io/2013/12/node-authentication-header.jpg">

		<!-- FACESPACE -->
		<meta property="fb:admins" content="579622216,709634581">
		<meta property="fb:app_id" content="1389892087910588">
		<meta property="og:url" content="https://scotch.io/tutorials/easy-node-authentication-setup-and-local">
		<meta property="og:type" content="article">
		<meta property="og:title" content="Easy Node Authentication: Setup and Local">
		<meta property="og:image" content="https://cask.scotch.io/2013/12/node-authentication-header.jpg">
		<meta property="og:description" content="">
		<meta property="og:site_name" content="Scotch">
		<meta property="article:author" content="http://facebook.com/sevilayha">
		<meta property="article:publisher" content="https://www.facebook.com/scotchdevelopment">

		<!-- G++ -->
		<meta itemprop="name" content="Easy Node Authentication: Setup and Local">
		<meta itemprop="description" content="">
		<meta itemprop="image" content="https://cask.scotch.io/2013/12/node-authentication-header.jpg">

		
	<!-- CSS -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700">
	<link rel="stylesheet" href="https://scotch.io/wp-content/themes/forty/build/styles.min.css">

	<!-- BEGIN UGLY WP HEAD FORMATTING -->
	
<script type="text/javascript">
var ct_ajaxurl = 'https://scotch.io/wp-admin/admin-ajax.php';
</script>
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"https:\/\/scotch.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.2"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Easy Node Authentication_ Setup and Local _ Scotch_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="mp-theme-css" href="./Easy Node Authentication_ Setup and Local _ Scotch_files/theme.css" type="text/css" media="all">

			
			
<script>
	// GOOGLE ANALYTICS
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-36045075-1', 'auto');
	ga('send', 'pageview');
</script>
<script async="" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/count-data.js"></script><script type="text/javascript" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" async="" src="https://s3.buysellads.com/ac/bsa.js"></script><script type="text/javascript" async="" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/embed.js"></script></head>
<body class="single single-post postid-723 single-format-standard" data-pinterest-extension-installed="cr1.37">
	<header id="site-header">
		<nav class="main-nav container-fluid">
			<a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" class="toggle-nav visible-xs visible-sm">
				<span class="icon ion-ios-pint-outline"></span>
			</a>

			<ul class="text-right hidden-xs hidden-sm">
				<li class="tutorial-nav">
					<a href="https://scotch.io/tutorials">
						Tutorials
						<span class="icon ion-ios-arrow-down"></span>
					</a>
				</li>
				<li><a href="https://scotch.io/courses">Courses</a></li>
				<li><a href="https://scotch.io/bar-talk">Bar Talk</a></li>
				<li><a href="http://shop.scotch.io/">Shop</a></li>
				<li><a href="https://scotch-slack.herokuapp.com/">Join on Slack</a></li>
			</ul>

			<div class="main-nav-logo">
				<a href="https://scotch.io/"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/scotch-logo-small.png" width="25" height="37"></a>
			</div>

			<ul class="hidden-xs hidden-sm">

									<li>
						<a class="signup-nav">Sign Up</a>/
						<a class="login-nav">Login</a>
					</li>
								<li>
					<form action="https://scotch.io/" method="GET" class="search-form" role="search">
						<span class="icon ion-ios-search-strong"></span>
						<input type="search" name="s" autocomplete="off">
					</form>
				</li>
			</ul>
		</nav>
	</header>

	<main id="site-main">
	<div class="site-wrapper">
	<div class="site-canvas" style="-webkit-transform: none; transform: none;">

	<div id="site-content">
		<div class="overlay"></div>

		<div id="mobile-menu">
			<ul>
				<li><a href="https://scotch.io/tutorials">Tutorials</a></li>
				<li><a href="https://scotch.io/courses">Courses</a></li>
				<li><a href="https://scotch.io/bar-talk">Bar Talk</a></li>
			</ul>
		</div>

		<div id="tags-list" class="">
			<a href="https://scotch.io/tag/angular-js" class="topic-angular">
				<span class="topic-img"></span>
				<span class="topic-name">Angular</span>
			</a>
			<a href="https://scotch.io/tag/node-js" class="topic-node">
				<span class="topic-img"></span>
				<span class="topic-name">Node</span>
			</a>
			<a href="https://scotch.io/tag/laravel" class="topic-laravel">
				<span class="topic-img"></span>
				<span class="topic-name">Laravel</span>
			</a>
			<a href="https://scotch.io/tag/mean" class="topic-mean">
				<span class="topic-img"></span>
				<span class="topic-name">MEAN</span>
			</a>
			<a href="https://scotch.io/tag/css" class="topic-css">
				<span class="topic-img"></span>
				<span class="topic-name">CSS</span>
			</a>
			<a href="https://scotch.io/tag/bootstrap" class="topic-bootstrap">
				<span class="topic-img"></span>
				<span class="topic-name">Bootstrap</span>
			</a>
			<a href="https://scotch.io/tag/sublime-text" class="topic-sublime">
				<span class="topic-img"></span>
				<span class="topic-name">Sublime Text</span>
			</a>
			<a href="https://scotch.io/tag/vagrant" class="topic-vagrant">
				<span class="topic-img"></span>
				<span class="topic-name">Vagrant</span>
			</a>
		</div>

		<div id="signup-dropdown">
		<a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" class="dropdown-close"><span class="icon ion-ios-close-outline"></span></a>
		<div class="container">
			<h3>Sign Up For Free</h3>
			<div class="signup-why">
				<div class="signup-reason">
					<span class="icon ion-ios-bookmarks-outline"></span>
					<h4>Save Your Favorite Articles</h4>
				</div>
				<div class="signup-reason">
					<span class="icon ion-ios-help-outline"></span>
					<h4>Get Help on the Forums</h4>
				</div>
				<div class="signup-reason">
					<span class="icon ion-ios-flower-outline"></span>
					<h4>Join the Community</h4>
				</div>
			</div>
			<form id="register" class="signup-form" action="https://scotch.io/wp-admin/admin-ajax.php" method="POST">
				<input type="hidden" id="signonsecurity" name="signonsecurity" value="ce810d051d"><input type="hidden" name="_wp_http_referer" value="/tutorials/easy-node-authentication-setup-and-local">				<input type="hidden" name="redirect_to" value="/tutorials/easy-node-authentication-setup-and-local?register=true">
				<div class="signup-row">
					<div class="form-group">
						<input type="text" name="username" class="form-control" placeholder="Username">
					</div>
					<div class="form-group">
						<input type="text" name="email" class="form-control" placeholder="Email">
					</div>
				</div>
				<div class="signup-row">
					<div class="form-group">
						<input type="password" name="password" class="form-control" placeholder="Password">
					</div>
					<div class="form-group">
						<input type="password" name="password_confirm" class="form-control" placeholder="Confirm Password">
					</div>
				</div>
				<div class="signup-row">
					<div class="form-group checkbox">
						<label>
							<input type="checkbox" name="newsletter_signup" checked=""> Sign Up for the Newsletter
						</label>
					</div>
					<button type="submit" class="btn btn-danger">Sign Up</button>
				</div>
			</form>
		</div>
		<div class="alert alert-danger register-message"></div>
		</div>

		<div id="login-dropdown">
		<a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" class="dropdown-close"><span class="icon ion-ios-close-outline"></span></a>
		<div class="container container-login">
		<div class="row">
			<div class="col-sm-4 col-sm-offset-4">
				<div class="login-form-header">
					<span class="icon ion-ios-sunny-outline"></span>
					<h3>Login</h3>
				</div>
				<form id="login" class="login-form" action="https://scotch.io/wp-admin/admin-ajax.php" method="POST">
					<input type="hidden" id="security" name="security" value="70c7cfde94"><input type="hidden" name="_wp_http_referer" value="/tutorials/easy-node-authentication-setup-and-local">					<input type="hidden" name="redirect_to" value="/tutorials/easy-node-authentication-setup-and-local">
					<div class="form-group">
						<input type="text" name="username" class="form-control" placeholder="Username">
					</div>
					<div class="form-group">
						<input type="password" name="password" class="form-control" placeholder="Password">
					</div>
					<div class="checkbox">
						<label>
							<input type="checkbox" name="rememberme" value="forever" checked="checked"> Remember Me
						</label>
					</div>
					<button type="submit" class="btn btn-danger btn-lg btn-block">Login</button>
					<p class="text-right"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" class="forgot-password btn btn-link btn-sm">Forgot Your Password</a></p>
				</form>

			</div>
		</div>
		</div>
		<div class="container container-forgot">
		<div class="row">
			<div class="col-sm-4 col-sm-offset-4">
				<div class="login-form-header">
					<span class="icon ion-ios-locked-outline"></span>
					<h3>Forgot Password</h3>
				</div>
				<form id="forgot" class="forgot-form" action="https://scotch.io/wp-admin/admin-ajax.php" method="POST">
					<input type="hidden" id="forgotsecurity" name="forgotsecurity" value="827e967171"><input type="hidden" name="_wp_http_referer" value="/tutorials/easy-node-authentication-setup-and-local">					<input type="hidden" name="redirect_to" value="/tutorials/easy-node-authentication-setup-and-local">
					<div class="form-group">
						<input type="text" name="user_login" class="form-control" placeholder="Username or Email">
					</div>
					<button type="submit" class="btn btn-danger btn-lg btn-block">Submit</button>
				</form>
			</div>
		</div>
		</div>
		<div class="alert alert-danger login-message"></div>
		</div>

<article class="single-article">

	<div class="page-topper text-center">
		<h1>
			Easy Node Authentication: Setup and Local		</h1>
		<div class="byline">
	<span class="byline-item byline-author">
		<a href="https://scotch.io/author/chris">
			<img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/8a8bf3a2c952984defbd6bb48304b38e">
			Chris 
			Sevilleja 
							(</a><a href="https://twitter.com/sevilayha">@sevilayha</a>)
					
	</span>
	<span class="byline-item">
		<span class="icon ion-ios-calendar-outline"></span> December 4, 2013	</span>
	
		<span class="byline-item">
		<span class="icon ion-ios-chatboxes-outline"></span> 
		<a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#disqus_thread" class="disqus-comment-count" data-disqus-url="https://scotch.io/tutorials/easy-node-authentication-setup-and-local">290</a>
	</span>
		<span class="byline-item">
		<span class="icon ion-coffee"></span> <a href="https://scotch.io/category/tutorials" rel="category tag">Tutorials</a>	</span>
		<span class="byline-item">
		<span class="icon ion-ios-pricetags"></span> <a href="https://scotch.io/tag/authentication" rel="tag">authentication</a>, <a href="https://scotch.io/tag/node-js" rel="tag">node.js</a> 
	</span>
	</div>	</div>

	<div class="page-hero clearfix">
		
<div id="hero" class="page-hero-cover">
	<div class="page-hero-cover-lg">
		<div class="page-hero-cover-img " style="background-image:url(&#39;https://cask.scotch.io/2013/12/node-authentication-header.jpg&#39;);"></div>

		
	</div>
	<div class="page-hero-cover-info share-stats-box">
		<div class="article-favorite">
			<span class="wpfp-span"><a class="wpfp-link" href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local?wpfpaction=add&postid=723" title="&lt;span class=&quot;icon ion-android-star-outline&quot;&gt;&lt;/span&gt; Favorite" rel="nofollow"><span class="icon ion-android-star-outline"></span> Favorite</a></span>		</div>
		<div class="share-stat share-stat-lg share-total sharrre" data-url="https://scotch.io/tutorials/easy-node-authentication-setup-and-local"><span class="share-number-total">98</span> shares</div>
		<div class="share-stat share-stat-btns">
			<a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" data-url="https://scotch.io/tutorials/easy-node-authentication-setup-and-local" class="sbg-twitter twitter-button sharrre"><span class="icon ion-social-twitter"></span> 40</a>
			<a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" data-url="https://scotch.io/tutorials/easy-node-authentication-setup-and-local" class="sbg-facebook facebook-button sharrre"><span class="icon ion-social-facebook"></span> 58</a>
		</div>
		
		
		
		
<div class="share-stat share-stat-action">
	
			<a href="https://github.com/scotch-io/easy-node-authentication/tree/local" class="btn-primary"> 
			<span class="icon ion-ios-speedometer-outline"></span> View Code
		</a>
	
	
			<a href="http://node-auth.scotch.io/" class="btn-danger">
			<span class="icon ion-ios-game-controller-b-outline"></span> View Demo
		</a>
	
	</div>

	</div>
</div>	</div>	

	<div class="page-main">
		<div class="page-content">
	
			<!-- LEGEND -->
			<div class="page-content-legend">
							<div class="sticky-wrapper" style="height: 0px;"><div class="legend stuck" style="left: -125px;">
	<div class="legend-box legend-social">
		<ul class="list-inline">
			<li><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" data-url="https://scotch.io/tutorials/easy-node-authentication-setup-and-local" class="twitter-button sharrre"><span class="icon ion-social-twitter sbg-twitter" style="-webkit-transform: rotate(399.4deg); transform: rotate(399.4deg);"></span> 40</a></li>
			<li><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" data-url="https://scotch.io/tutorials/easy-node-authentication-setup-and-local" class="facebook-button sharrre"><span class="icon ion-social-facebook sbg-facebook" style="-webkit-transform: rotate(399.4deg); transform: rotate(399.4deg);"></span> 58</a></li>
		</ul>
	</div>

	<div class="legend-box legend-action">
		
<div class="share-stat share-stat-action">
	
			<a href="https://github.com/scotch-io/easy-node-authentication/tree/local" class="btn-primary"> 
			<span class="icon ion-ios-speedometer-outline"></span> View Code
		</a>
	
	
			<a href="http://node-auth.scotch.io/" class="btn-danger">
			<span class="icon ion-ios-game-controller-b-outline"></span> View Demo
		</a>
	
	</div>

	
	</div>

	<div class="legend-box legend-outline">
		<h5>Outline</h5>
		<form>
			<select class="form-control"><option value="application-structure">Application Structure</option><option value="packages-package-json" selected="selected">Packages package.json</option><option value="application-setup-server-js">Application Setup server.js</option><option value="database-config-config/database-js">Database Config config/database.js</option><option value="routes-app/routes-js">Routes app/routes.js</option><option value="views-views/index-ejs,-views/login-ejs,-views/signup-ejs">Views views/index.ejs, views/login.ejs, views/signup.ejs</option><option value="user-model">User Model</option><option value="handling-signup/registration">Handling Signup/Registration</option><option value="login">Login</option><option value="displaying-user-and-secure-profile-page-views/profile-ejs">Displaying User and Secure Profile Page views/profile.ejs</option><option value="conclusion">Conclusion</option></select>
		</form>						
	</div>

		<div class="legend-box legend-next">
		<h5>Next in the Course</h5>
		<a href="https://scotch.io/tutorials/easy-node-authentication-facebook">
			Easy Node Authentication: Facebook			<span class="icon ion ion-android-arrow-dropright-circle"></span>
		</a>
	</div>
	
	<div id="scroll-to-top"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#" class="icon-right">
		<span class="icon ion-umbrella"></span> 
		<span class="scroll-to-top-text">Scroll to Top</span>
	</a></div>
</div></div>						</div>

			<!-- PAGE CONTENT -->
			<div class="page-content-inside">
				<div class="page-content-primary">

										<div class="content-ad clearfix">
						<div id="bsap_1300582" class="bsarocks bsap_8321ee0e3825ae084dc5408db80d21db"></div>
					</div>
										
					<div class="tile"><div class="tile-content"><p></p>
<div class="alert alert-info">
  This tutorial has been updating for ExpressJS 4.0. Read more <a href="https://scotch.io/tutorials/javascript/upgrading-our-easy-node-authentication-series-to-expressjs-4-0" class="alert-link">here</a>.
</div>
<p>Authentication and logins in Node can be a complicated thing. Actually logging in for any application can be a pain. This article series will deal with authenticating in your Node application using the package <a href="http://passportjs.org/" target="blank">Passport</a>.</p>
<h3>What we’ll be building:</h3>
<p>We will build an application that will have:</p>
<ul>
<li><strong>Local account logins</strong> and signups (using <a href="https://github.com/jaredhanson/passport-local" target="_blank">passport-local</a>)</li>
<li><strong>Facebook logins</strong> and registration (using <a href="https://github.com/jaredhanson/passport-facebook" target="_blank">passport-facebook</a>)</li>
<li><strong>Twitter logins</strong> and registration (using <a href="https://github.com/jaredhanson/passport-twitter" target="_blank">passport-twitter</a>)</li>
<li><strong>Google+ logins</strong> and registration (using oauth with <a href="https://github.com/jaredhanson/passport-google-oauth" target="_blank">passport-google-oauth</a>)</li>
<li>Require login for certain routes/sections of your application</li>
<li>Creating a password hash for local accounts (using <a href="https://github.com/shaneGirish/bcrypt-nodejs" target="_blank">bcrypt-nodejs</a>)</li>
<li>Displaying error messages (using flash with <a href="https://github.com/jaredhanson/connect-flash" target="_blank">connect-flash</a>. required since express 3.x)</li>
<li>Linking all social accounts under one user account</li>
<li>Allowing a user to unlink a specific social account</li>
</ul>
<h3>The Tutorial Series</h3>
<p>We’ll release this entire gigantic series over 5 different tutorials. They are:</p>
<ol>
<li>Getting Set up and Local Authentication</li>
<li>Facebook Authentication</li>
<li>Twitter Authentication</li>
<li>Google Authentication</li>
<li>Linking all accounts together</li>
</ol>
<p>Enough chit chat. Let’s dive right into a completely blank Node application and build our entire application from scratch.</p>
<p>Here’s what we’ll be building:</p>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-authentication.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-authentication.jpg" alt="node-authentication" width="1188" height="355" class="alignnone size-full wp-image-725 img-responsive img-thumbnail"></a> And after a user has logged in with all their credentials:</p>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-authentication-profile1.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-authentication-profile1.jpg" alt="node-authentication-profile" width="1181" height="711" class="alignnone size-full wp-image-728 img-thumbnail img-responsive"></a> For this article, we’ll be focusing on setup and only local logins and registrations/signups. Since this is the first article and also deals with setting up our application, it will probably be one of the longer ones if not the longest. Sit tight for the duration of your flight.</p>
<h3>Setting Up Our Application</h3>
<p>To set up our base Node application, we’ll need a few things. We’ll set up our <strong>npm packages</strong>, <strong>node application</strong>, <strong>configuration files</strong>, <strong>models</strong>, and <strong>routes</strong>.</p>
<h2 id="application-structure"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#application-structure"><span class="heading-link icon ion-link"></span> Application Structure</a></h2>
<pre class=" language-markup"><code class=" language-markup">    - app
    ------ models
    ---------- user.js  <span class="token comment" spellcheck="true">&lt;!-- our user model --&gt;</span>
    ------ routes.js    <span class="token comment" spellcheck="true">&lt;!-- all the routes for our application --&gt;</span>
    - config
    ------ auth.js      <span class="token comment" spellcheck="true">&lt;!-- will hold all our client secret keys (facebook, twitter, google) --&gt;</span>
    ------ database.js  <span class="token comment" spellcheck="true">&lt;!-- will hold our database connection settings --&gt;</span>
    ------ passport.js  <span class="token comment" spellcheck="true">&lt;!-- configuring the strategies for passport --&gt;</span>
    - views
    ------ index.ejs    <span class="token comment" spellcheck="true">&lt;!-- show our home page with login links --&gt;</span>
    ------ login.ejs    <span class="token comment" spellcheck="true">&lt;!-- show our login form --&gt;</span>
    ------ signup.ejs   <span class="token comment" spellcheck="true">&lt;!-- show our signup form --&gt;</span>
    ------ profile.ejs  <span class="token comment" spellcheck="true">&lt;!-- after a user logs in, they will see their profile --&gt;</span>
    - package.json      <span class="token comment" spellcheck="true">&lt;!-- handle our npm packages --&gt;</span>
    - server.js         <span class="token comment" spellcheck="true">&lt;!-- setup our application --&gt;</span>
</code>
</pre>
<p>Go ahead and create all those files and folders and we’ll fill them in as we go along.</p>
<h2 id="packages-package-json"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#packages-package-json"><span class="heading-link icon ion-link"></span> Packages <small>package.json</small></a></h2>
<p>We are going to install all the packages needed for the entire tutorial series. This means we’ll install all the packages needed for passport local, facebook, twitter, google, and the other things we need. It’s all commented out so you know what each does.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// package.json</span>

<span class="token punctuation">{</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"node-authentication"</span><span class="token punctuation">,</span>
  <span class="token string">"main"</span><span class="token punctuation">:</span> <span class="token string">"server.js"</span><span class="token punctuation">,</span>
  <span class="token string">"dependencies"</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"express"</span> <span class="token punctuation">:</span> <span class="token string">"~4.0.0"</span><span class="token punctuation">,</span>           
    <span class="token string">"ejs"</span> <span class="token punctuation">:</span> <span class="token string">"~0.8.5"</span><span class="token punctuation">,</span>               
    <span class="token string">"mongoose"</span> <span class="token punctuation">:</span> <span class="token string">"~3.8.1"</span><span class="token punctuation">,</span>          
    <span class="token string">"passport"</span> <span class="token punctuation">:</span> <span class="token string">"~0.1.17"</span><span class="token punctuation">,</span>         
    <span class="token string">"passport-local"</span> <span class="token punctuation">:</span> <span class="token string">"~0.1.6"</span><span class="token punctuation">,</span>    
    <span class="token string">"passport-facebook"</span> <span class="token punctuation">:</span> <span class="token string">"~1.0.2"</span><span class="token punctuation">,</span> 
    <span class="token string">"passport-twitter"</span> <span class="token punctuation">:</span> <span class="token string">"~1.0.2"</span><span class="token punctuation">,</span>  
    <span class="token string">"passport-google-oauth"</span> <span class="token punctuation">:</span> <span class="token string">"~0.1.5"</span><span class="token punctuation">,</span>
    <span class="token string">"connect-flash"</span> <span class="token punctuation">:</span> <span class="token string">"~0.1.1"</span><span class="token punctuation">,</span>     
    <span class="token string">"bcrypt-nodejs"</span> <span class="token punctuation">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>

    <span class="token string">"morgan"</span><span class="token punctuation">:</span> <span class="token string">"~1.0.0"</span><span class="token punctuation">,</span>
    <span class="token string">"body-parser"</span><span class="token punctuation">:</span> <span class="token string">"~1.0.0"</span><span class="token punctuation">,</span>
    <span class="token string">"cookie-parser"</span><span class="token punctuation">:</span> <span class="token string">"~1.0.0"</span><span class="token punctuation">,</span>
    <span class="token string">"method-override"</span><span class="token punctuation">:</span> <span class="token string">"~1.0.0"</span><span class="token punctuation">,</span>
    <span class="token string">"express-session"</span><span class="token punctuation">:</span> <span class="token string">"~1.0.0"</span>     
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code>
</pre>
<p>Most of these are pretty self-explanatory.</p>
<ul>
<li><em>Express</em> is the framework. </li>
<li><em>Ejs</em> is the templating engine. </li>
<li><em>Mongoose</em> is object modeling for our MongoDB database. </li>
<li><em>Passport</em> stuff will help us authenticating with different methods. </li>
<li><em>Connect-flash</em> allows for passing session flashdata messages. </li>
<li><em>Bcrypt-nodejs</em> gives us the ability to hash the password. </li>
</ul>
<p>I use bcrypt-nodejs instead of bcrypt since it is easier to set up in windows. For more information on the newer ExpressJS 4.0 dependencies (morgan, body-parser, cookie-parser, method-override, express-session), see this article on</p>
<p><a href="https://scotch.io/bar-talk/expressjs-4-0-new-features-and-upgrading-from-3-0#removed-bundled-middleware">ExpressJS 4.0</a>. Now that we have all of our dependencies ready to go, let’s go ahead and install them:</p>
<p><code>npm install</code> With all of our packages ready to go, let’s set up our application in <code>server.js</code>.</p>
<h2 id="application-setup-server-js"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#application-setup-server-js"><span class="heading-link icon ion-link"></span> Application Setup <small>server.js</small></a></h2>
<p>Let’s make all our packages work together nicely. Our goal is to set up this file and try to have it bootstrap our entire application. We’d like to not go back into this file if it can be helped. This file will be the glue for our entire application.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// server.js</span>

<span class="token comment" spellcheck="true">// set up ======================================================================</span>
<span class="token comment" spellcheck="true">// get all the tools we need</span>
<span class="token keyword keyword-var">var</span> express  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> app      <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> port     <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>PORT <span class="token operator">||</span> <span class="token number">8080</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> flash    <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'connect-flash'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-var">var</span> morgan       <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'morgan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> cookieParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cookie-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> bodyParser   <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> session      <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-var">var</span> configDB <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./config/database.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// configuration ===============================================================</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>configDB<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// connect to our database</span>

<span class="token comment" spellcheck="true">// require('./config/passport')(passport); // pass passport for configuration</span>

<span class="token comment" spellcheck="true">// set up our express application</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">morgan</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// log every request to the console</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// read cookies (needed for auth)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">bodyParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// get information from html forms</span>

app<span class="token punctuation">.</span><span class="token keyword keyword-set">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// set up ejs for templating</span>

<span class="token comment" spellcheck="true">// required for passport</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span> secret<span class="token punctuation">:</span> <span class="token string">'ilovescotchscotchyscotchscotch'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// session secret</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// persistent login sessions</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// use connect-flash for flash messages stored in session</span>

<span class="token comment" spellcheck="true">// routes ======================================================================</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./app/routes.js'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> passport<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// load our routes and pass in our app and fully configured passport</span>

<span class="token comment" spellcheck="true">// launch ======================================================================</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The magic happens on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code>
</pre>
<p>We are going to comment out our passport configuration for now. We’ll uncomment it after we create that <code>config/passport.js</code> file.</p>
<p>The path of our <strong>passport</strong> object is important to note here. We will create it at the very beginning of the file with <code>var passport = require('passport');</code>. Then we pass it into our <code>config/passport.js</code> file for it to be configured. Then we pass it to the <code>app/routes.js</code> file for it to be used in our routes.</p>
<p>Now with this file, we have our application listening on <strong>port 8080</strong>. All we have to do to start up our server is:</p>
<p><code>node server.js</code> Then when we visit <strong>http://localhost:8080</strong> we will see our application. (Not really right this moment since we have some more set up to do)</p>
<div class="alert alert-info">
  <i class="icon-bolt"></i> <strong>Auto Refreshing:</strong> By default, node doesn’t automatically refresh our server every time we change files. To do that we’ll use <a href="https://github.com/remy/nodemon" class="alert-link" target="_blank">nodemon</a>. Just install with: <code>npm install -g nodemon</code> and use with: <code>nodemon server.js</code>.
</div>
<p>Now this won’t do much for our application since we don’t have our <strong>database configuration</strong>, <strong>routes</strong>, <strong>user model</strong>, or <strong>passport configuration</strong> set up. Let’s do the database and routes now.</p>
<h2 id="database-config-config/database-js"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#database-config-config/database-js"><span class="heading-link icon ion-link"></span> Database Config <small>config/database.js</small></a></h2>
<p>We already are calling this file in <code>server.js</code>. Now we just have to set it up.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// config/database.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token string">'url'</span> <span class="token punctuation">:</span> <span class="token string">'your-settings-here'</span> <span class="token comment" spellcheck="true">// looks like <a class="token email-link" href="mailto:mongodb://<user>:<pass>@mongo.onmodulus.net">mongodb://&lt;user&gt;:&lt;pass&gt;@mongo.onmodulus.net</a>:27017/Mikha4ot</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>
<p>Fill this in with your own database. If you don’t have a MongoDB database lying around, I would suggest going to <a href="https://modulus.io/" target="_blank">Modulus.io</a> and grabbing one. Once you sign up (and you get a $15 credit for signing up), you can create your database, grab its <strong>connection url</strong>, and place it in this file.</p>
<p>You can also install MongoDB locally and use a local database. You can find instructions here: <a href="https://scotch.io/tutorials/an-introduction-to-mongodb">An Introduction to MongoDB</a>.</p>
<h2 id="routes-app/routes-js"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#routes-app/routes-js"><span class="heading-link icon ion-link"></span> Routes <small>app/routes.js</small></a></h2>
<p>We will keep our routes simple for now. We will have the following routes:</p>
<ul>
<li>Home Page (/)</li>
<li>Login Page (/login)</li>
<li>Signup Page (/signup)</li>
<li>Handle the POST for both login</li>
<li>Handle the POST for both signup</li>
<li>Profile Page (after logged in)</li>
</ul>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// app/routes.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> passport<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// HOME PAGE (with login links) ========</span>
    <span class="token comment" spellcheck="true">// =====================================</span>
    app<span class="token punctuation">.</span><span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index.ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// load the index.ejs file</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// LOGIN ===============================</span>
    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// show the login form</span>
    app<span class="token punctuation">.</span><span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// render the page and pass in any flash data if it exists</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'login.ejs'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token punctuation">:</span> req<span class="token punctuation">.</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token string">'loginMessage'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// process the login form</span>
    <span class="token comment" spellcheck="true">// app.post('/login', do all our passport stuff here);</span>

    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// SIGNUP ==============================</span>
    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// show the signup form</span>
    app<span class="token punctuation">.</span><span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token string">'/signup'</span><span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// render the page and pass in any flash data if it exists</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'signup.ejs'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token punctuation">:</span> req<span class="token punctuation">.</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token string">'signupMessage'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// process the signup form</span>
    <span class="token comment" spellcheck="true">// app.post('/signup', do all our passport stuff here);</span>

    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// PROFILE SECTION =====================</span>
    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// we will want this protected so you have to be logged in to visit</span>
    <span class="token comment" spellcheck="true">// we will use route middleware to verify this (the isLoggedIn function)</span>
    app<span class="token punctuation">.</span><span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token string">'/profile'</span><span class="token punctuation">,</span> isLoggedIn<span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'profile.ejs'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            user <span class="token punctuation">:</span> req<span class="token punctuation">.</span>user <span class="token comment" spellcheck="true">// get the user out of session and pass to template</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// =====================================</span>
    <span class="token comment" spellcheck="true">// LOGOUT ==============================</span>
    <span class="token comment" spellcheck="true">// =====================================</span>
    app<span class="token punctuation">.</span><span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token string">'/logout'</span><span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// route middleware to make sure a user is logged in</span>
<span class="token keyword keyword-function">function</span> <span class="token function">isLoggedIn</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">// if user is authenticated in the session, carry on </span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// if they aren't redirect them to the home page</span>
    res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code>
</pre>
<p><strong>app.post</strong>: For now, we will comment out the routes for handling the form POST. We do this since passport isn’t set up yet.</p>
<p><strong>req.flash</strong>: This is the connect-flash way of getting flashdata in the session. We will create the <code>loginMessage</code> inside our passport configuration.</p>
<p><strong>isLoggedIn</strong>: Using <strong>route middleware</strong>, we can protect the profile section route. A user has to be logged in to access that route. Using the <code>isLoggedIn</code> function, we will kick a user back to the home page if they try to access <code>http://localhost:8080/profile</code> and they are <strong>not logged in</strong>.</p>
<p><strong>Logout</strong>: We will handle logout by using <code>req.logout()</code> provided by passport. After logging out, redirect the user to the home page.</p>
<p>With our server running, we can visit our application in our browser at <strong>http://localhost:8080</strong>. Once again, we won’t see much since we haven’t made our <strong>views</strong>. Let’s go do that now. (We’re almost to the authentication stuff, I promise).</p>
<h2 id="views-views/index-ejs,-views/login-ejs,-views/signup-ejs"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#views-views/index-ejs,-views/login-ejs,-views/signup-ejs"><span class="heading-link icon ion-link"></span> Views <small>views/index.ejs, views/login.ejs, views/signup.ejs</small></a></h2>
<p>Here we’ll define our views for our <strong>home page</strong>, <strong>login page</strong>, and <strong>signup/registration page</strong>.</p>
<h3>Home Page <small>views/index.ejs</small></h3>
<p>Our home page will just show links to all our forms of authentication.</p>
<pre class=" language-markup"><code class=" language-markup"><span class="token comment" spellcheck="true">&lt;!-- views/index.ejs --&gt;</span>
&lt;!doctype html&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Node Authentication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment" spellcheck="true">&lt;!-- load bootstrap css --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment" spellcheck="true">&lt;!-- load fontawesome --&gt;</span>
    <span class="token style language-css"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span>
        <span class="token selector">body        </span><span class="token punctuation">{</span> <span class="token property">padding-top</span><span class="token punctuation">:</span><span class="token number">80</span>px<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jumbotron text-center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fa fa-lock<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> Node Authentication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Login or Register with:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-default<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fa fa-user<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> Local Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/signup<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-default<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fa fa-user<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> Local Signup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code>
</pre>
<p>Now if we visit our app in our browser, we’ll have a site that looks like this:</p>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-authentication-local.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-authentication-local.jpg" alt="node-authentication-local" width="1187" height="316" class="alignnone size-full wp-image-731 img-thumbnail img-responsive"></a> Here are the views for our login and signup pages also.</p>
<h3>Login Form <small>views/login.ejs</small></h3>
<pre class=" language-markup"><code class=" language-markup"><span class="token comment" spellcheck="true">&lt;!-- views/login.ejs --&gt;</span>
&lt;!doctype html&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Node Authentication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment" spellcheck="true">&lt;!-- load bootstrap css --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment" spellcheck="true">&lt;!-- load fontawesome --&gt;</span>
    <span class="token style language-css"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span>
        <span class="token selector">body        </span><span class="token punctuation">{</span> <span class="token property">padding-top</span><span class="token punctuation">:</span><span class="token number">80</span>px<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-sm-6 col-sm-offset-3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fa fa-sign-in<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment" spellcheck="true">&lt;!-- show any messages that come back with authentication --&gt;</span>
    &lt;% if (message.length &gt; 0) { %&gt;
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>alert alert-danger<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>&lt;%= message %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    &lt;% } %&gt;

    <span class="token comment" spellcheck="true">&lt;!-- LOGIN FORM --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-warning btn-lg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Need an account? <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/signup<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Signup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Or go <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code>
</pre>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-local-login.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-local-login.jpg" alt="node-auth-local-login" width="600" height="400" class="alignnone size-full wp-image-732 img-thumbnail img-responsive"></a></p>
<h3>Signup Form <small>views/signup.ejs</small></h3>
<pre class=" language-markup"><code class=" language-markup"><span class="token comment" spellcheck="true">&lt;!-- views/signup.ejs --&gt;</span>
&lt;!doctype html&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Node Authentication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment" spellcheck="true">&lt;!-- load bootstrap css --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment" spellcheck="true">&lt;!-- load fontawesome --&gt;</span>
    <span class="token style language-css"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span>
        <span class="token selector">body        </span><span class="token punctuation">{</span> <span class="token property">padding-top</span><span class="token punctuation">:</span><span class="token number">80</span>px<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-sm-6 col-sm-offset-3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fa fa-sign-in<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> Signup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment" spellcheck="true">&lt;!-- show any messages that come back with authentication --&gt;</span>
    &lt;% if (message.length &gt; 0) { %&gt;
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>alert alert-danger<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>&lt;%= message %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    &lt;% } %&gt;

    <span class="token comment" spellcheck="true">&lt;!-- LOGIN FORM --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/signup<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-warning btn-lg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Signup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Already have an account? <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Or go <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code>
</pre>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-local-signup.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-local-signup.jpg" alt="node-auth-local-signup" width="600" height="400" class="alignnone size-full wp-image-733 img-thumbnail img-responsive"></a></p>
<h3>Authenticating With Passport Locally</h3>
<p>Finally! We have finally set up our application and have gotten to the authentication part. Don’t worry. The rest of the authentication articles in this tutorial series will use the same base so we won’t have to set up our application again.</p>
<p>So far we have <strong>installed our packages</strong>, <strong>set up our application</strong>, <strong>connected to our database</strong>, <strong>created our routes</strong>, and <strong>created our views</strong>.</p>
<p>Now we will create our <strong>user model</strong>, <strong>configure passport for local authentication</strong>, and use our configured passport to <strong>process our login/signup forms</strong>.</p>
<h2 id="user-model"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#user-model"><span class="heading-link icon ion-link"></span> User Model</a></h2>
<p>We will create our user model for the entire tutorial series. Our user will have the ability to be linked to multiple social accounts and to a local account. For local accounts, we will be keeping <strong>email</strong> and <strong>password</strong>. For the social accounts, we will be keeping their <strong>id</strong>, <strong>token</strong>, and some user information.</p>
<p>You can change these fields out to be whatever you want. You can authenticate locally using username and password (passport-local actually uses username by default but we’ll change that to email).</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// app/models/user.js</span>
<span class="token comment" spellcheck="true">// load the things we need</span>
<span class="token keyword keyword-var">var</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-var">var</span> bcrypt   <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcrypt-nodejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// define the schema for our user model</span>
<span class="token keyword keyword-var">var</span> userSchema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

    local            <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        email        <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        password     <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    facebook         <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        id           <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        token        <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        email        <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        name         <span class="token punctuation">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    twitter          <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        id           <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        token        <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        displayName  <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        username     <span class="token punctuation">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    google           <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        id           <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        token        <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        email        <span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        name         <span class="token punctuation">:</span> String
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// methods ======================</span>
<span class="token comment" spellcheck="true">// generating a hash</span>
userSchema<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>generateHash <span class="token operator">=</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> bcrypt<span class="token punctuation">.</span><span class="token function">hashSync</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> bcrypt<span class="token punctuation">.</span><span class="token function">genSaltSync</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// checking if password is valid</span>
userSchema<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>validPassword <span class="token operator">=</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> bcrypt<span class="token punctuation">.</span><span class="token function">compareSync</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>local<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// create the model for users and expose it to our app</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code>
</pre>
<p>Our model is done. We will be hashing our password within our user model before it saves to the database. This means we don’t have to deal with generating the hash ourselves. It is all handled nicely and neatly inside our user model.</p>
<p>Let’s move onto the important stuff of this article: <strong>authenticating locally</strong>!</p>
<h3>Configuring Passport for Local Accounts</h3>
<p>All the configuration for passport will be handled in <code>config/passport.js</code>. We want to keep this code in its own file away from our other main files like routes or the server file. I have seen some implementations where passport will be configured in random places. I believe having it in this config file will keep your overall application clean and concise.</p>
<p>So far, we created our passport object in <code>server.js</code>, and then we pass it to our <code>config/passport.js</code> file. This is where we configure our <strong>Strategy</strong> for local, facebook, twitter, and google. This is also the file where we will create the <code>serializeUser</code> and <code>deserializeUser</code> functions to store our user in session.</p>
<p>I would highly recommend going to read the <a href="http://passportjs.org/guide/" target="_blank">passport docs</a> to understand more about how the package works.</p>
<h2 id="handling-signup/registration"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#handling-signup/registration"><span class="heading-link icon ion-link"></span> Handling Signup/Registration</a></h2>
<p>We will be handling login and signup in <code>config/passport.js</code>. Let’s look at signup first.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// config/passport.js</span>

<span class="token comment" spellcheck="true">// load all the things we need</span>
<span class="token keyword keyword-var">var</span> LocalStrategy   <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport-local'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Strategy<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// load up the user model</span>
<span class="token keyword keyword-var">var</span> User            <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../app/models/user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// expose this function to our app using module.exports</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>passport<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">// =========================================================================</span>
    <span class="token comment" spellcheck="true">// passport session setup ==================================================</span>
    <span class="token comment" spellcheck="true">// =========================================================================</span>
    <span class="token comment" spellcheck="true">// required for persistent login sessions</span>
    <span class="token comment" spellcheck="true">// passport needs ability to serialize and unserialize users out of session</span>

    <span class="token comment" spellcheck="true">// used to serialize the user for the session</span>
    passport<span class="token punctuation">.</span><span class="token function">serializeUser</span><span class="token punctuation">(</span><span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// used to deserialize the user</span>
    passport<span class="token punctuation">.</span><span class="token function">deserializeUser</span><span class="token punctuation">(</span><span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        User<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// =========================================================================</span>
    <span class="token comment" spellcheck="true">// LOCAL SIGNUP ============================================================</span>
    <span class="token comment" spellcheck="true">// =========================================================================</span>
    <span class="token comment" spellcheck="true">// we are using named strategies since we have one for login and one for signup</span>
    <span class="token comment" spellcheck="true">// by default, if there was no name, it would just be called 'local'</span>

    passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'local-signup'</span><span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// by default, local strategy uses username and password, we will override with email</span>
        usernameField <span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
        passwordField <span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span>
        passReqToCallback <span class="token punctuation">:</span> <span class="token keyword keyword-true">true</span> <span class="token comment" spellcheck="true">// allows us to pass back the entire request to the callback</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// asynchronous</span>
        <span class="token comment" spellcheck="true">// User.findOne wont fire unless data is sent back</span>
        process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword keyword-function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// find a user whose email is the same as the forms email</span>
        <span class="token comment" spellcheck="true">// we are checking to see if the user trying to login already exists</span>
        User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'local.email'</span> <span class="token punctuation">:</span>  email <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// if there are any errors, return the error</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
                <span class="token keyword keyword-return">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// check to see if theres already a user with that email</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword keyword-return">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token keyword keyword-false">false</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token string">'signupMessage'</span><span class="token punctuation">,</span> <span class="token string">'That email is already taken.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token punctuation">{</span>

                <span class="token comment" spellcheck="true">// if there is no user with that email</span>
                <span class="token comment" spellcheck="true">// create the user</span>
                <span class="token keyword keyword-var">var</span> newUser            <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment" spellcheck="true">// set the user's local credentials</span>
                newUser<span class="token punctuation">.</span>local<span class="token punctuation">.</span>email    <span class="token operator">=</span> email<span class="token punctuation">;</span>
                newUser<span class="token punctuation">.</span>local<span class="token punctuation">.</span>password <span class="token operator">=</span> newUser<span class="token punctuation">.</span><span class="token function">generateHash</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment" spellcheck="true">// save the user</span>
                newUser<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
                        <span class="token keyword keyword-throw">throw</span> err<span class="token punctuation">;</span>
                    <span class="token keyword keyword-return">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> newUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>
<p>We have now provided a strategy to passport called <strong>local-signup</strong>. We will use this strategy to process our signup form. Let’s open up our <code>app/routes.js</code> and handle the POST for our signup form.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// app/routes.js</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment" spellcheck="true">// process the signup form</span>
    app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/signup'</span><span class="token punctuation">,</span> passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">'local-signup'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        successRedirect <span class="token punctuation">:</span> <span class="token string">'/profile'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// redirect to the secure profile section</span>
        failureRedirect <span class="token punctuation">:</span> <span class="token string">'/signup'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// redirect back to the signup page if there is an error</span>
        failureFlash <span class="token punctuation">:</span> <span class="token keyword keyword-true">true</span> <span class="token comment" spellcheck="true">// allow flash messages</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code>
</pre>
<p>That’s all the code we need for the route. All of the heavy duty stuff lives inside of <code>config/passport.js</code>. All we have to set here is where our failures and successes get redirected. Super clean.</p>
<p>There is also much more you can do with this. Instead of specifying a <code>successRedirect</code>, you could use a callback and take more control over how your application works. Here is a great <a href="http://stackoverflow.com/questions/15711127/express-passport-node-js-error-handling" target="_blank">stackoverflow answer</a> on error handling. It explains how to use <code>done()</code> and how to be more specific with your handling of a route.</p>
<h3>Testing Signup</h3>
<p>With our passport config finally laid out, we can uncomment that line in our <code>server.js</code>. This will load our config and then we can use our signup form.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// server.js</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment" spellcheck="true">// uncomment this line</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./config/passport'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>passport<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// pass passport for configuration</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code>
</pre>
<p>Now that we have passport, our routes, and our redirects in place, let’s go ahead and test our signup form. In your browser, go to <strong>http://localhost:8080/signup</strong> and fill out your form.</p>
<p>If all goes according to plan, you should be <strong>logged in</strong>, your user <strong>saved in the session</strong>, and you are <strong>redirected to the /profile page</strong> (the profile page will show nothing right now since we haven’t defined that view).</p>
<p>If we look in our database, we’ll also see our user sitting there cozily with all the credentials we created for him.</p>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-user-in-database.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-user-in-database.jpg" alt="node-user-in-database" width="738" height="146" class="alignnone size-full wp-image-740 img-responsive img-thumbnail"></a></p>
<div class="alert alert-info">
  <i class="icon-bolt"></i> <strong>Exploring Your Database</strong>: I use <a href="http://robomongo.org/" class="alert-link" target="_blank">Robomongo</a> to see what’s in my database. Just download it and connect to your database to see your new users after they signup!
</div>
<p>With users able to sign up, let’s give them a way to login.</p>
<h2 id="login"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#login"><span class="heading-link icon ion-link"></span> Login</a></h2>
<p>This will be very similar to the signup strategy. We’ll add the strategy to our <code>config/passport.js</code> and the route in <code>app/routes.js</code>.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// config/passport.js</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment" spellcheck="true">// =========================================================================</span>
    <span class="token comment" spellcheck="true">// LOCAL LOGIN =============================================================</span>
    <span class="token comment" spellcheck="true">// =========================================================================</span>
    <span class="token comment" spellcheck="true">// we are using named strategies since we have one for login and one for signup</span>
    <span class="token comment" spellcheck="true">// by default, if there was no name, it would just be called 'local'</span>

    passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'local-login'</span><span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// by default, local strategy uses username and password, we will override with email</span>
        usernameField <span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
        passwordField <span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span>
        passReqToCallback <span class="token punctuation">:</span> <span class="token keyword keyword-true">true</span> <span class="token comment" spellcheck="true">// allows us to pass back the entire request to the callback</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// callback with email and password from our form</span>

        <span class="token comment" spellcheck="true">// find a user whose email is the same as the forms email</span>
        <span class="token comment" spellcheck="true">// we are checking to see if the user trying to login already exists</span>
        User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'local.email'</span> <span class="token punctuation">:</span>  email <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// if there are any errors, return the error before anything else</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
                <span class="token keyword keyword-return">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// if no user is found, return the message</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span>
                <span class="token keyword keyword-return">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token keyword keyword-false">false</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token string">'loginMessage'</span><span class="token punctuation">,</span> <span class="token string">'No user found.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// req.flash is the way to set flashdata using connect-flash</span>

            <span class="token comment" spellcheck="true">// if the user is found but the password is wrong</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span><span class="token function">validPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword keyword-return">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token keyword keyword-false">false</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token string">'loginMessage'</span><span class="token punctuation">,</span> <span class="token string">'Oops! Wrong password.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// create the loginMessage and save it to session as flashdata</span>

            <span class="token comment" spellcheck="true">// all is well, return successful user</span>
            <span class="token keyword keyword-return">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code>
</pre>
<p>We have now provided a strategy to passport called <strong>local-login</strong>. We will use this strategy to process our login form. We can check if a user exists, if the password is wrong, and set flash data to show error messages. Let’s open up our <code>app/routes.js</code> and handle the POST for our login form.</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// app/routes.js</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment" spellcheck="true">// process the login form</span>
    app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">'local-login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        successRedirect <span class="token punctuation">:</span> <span class="token string">'/profile'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// redirect to the secure profile section</span>
        failureRedirect <span class="token punctuation">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// redirect back to the signup page if there is an error</span>
        failureFlash <span class="token punctuation">:</span> <span class="token keyword keyword-true">true</span> <span class="token comment" spellcheck="true">// allow flash messages</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code>
</pre>
<p>If you try to login with a user email that doesn’t exist in our database, you will see the error. Same goes for if your password is wrong.</p>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-login-error.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-login-error.jpg" alt="node-auth-login-error" width="618" height="469" class="alignnone size-full wp-image-742 img-thumbnail img-responsive"></a></p>
<h2 id="displaying-user-and-secure-profile-page-views/profile-ejs"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#displaying-user-and-secure-profile-page-views/profile-ejs"><span class="heading-link icon ion-link"></span> Displaying User and Secure Profile Page <small>views/profile.ejs</small></a></h2>
<p>Now we have functional signup and login forms. If a user is successful in authenticating they will be redirected to the profile page. If they are not successful, they will go home. The last thing we need to do is make our profile page so that those that are lucky enough to signup (all of us?) will have an exclusive place of our site all to themselves.</p>
<pre class=" language-markup"><code class=" language-markup"><span class="token comment" spellcheck="true">&lt;!-- views/profile.ejs --&gt;</span>
&lt;!doctype html&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Node Authentication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token style language-css"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span>
        <span class="token selector">body        </span><span class="token punctuation">{</span> <span class="token property">padding-top</span><span class="token punctuation">:</span><span class="token number">80</span>px<span class="token punctuation">;</span> <span class="token property">word-wrap</span><span class="token punctuation">:</span>break-word<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page-header text-center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fa fa-anchor<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> Profile Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/logout<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-default btn-sm<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Logout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token comment" spellcheck="true">&lt;!-- LOCAL INFORMATION --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-sm-6<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>well<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fa fa-user<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> Local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>

                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>: &lt;%= user._id %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>: &lt;%= user.local.email %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>: &lt;%= user.local.password %&gt;
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code>
</pre>
<p>After a user logs in, they can see all their information. It is grabbed from the session and passed to our view in the <code>app/routes.js</code> file. We will also provide a link to logout.</p>
<p><a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-local-profile-page.jpg"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/node-auth-local-profile-page.jpg" alt="node-auth-local-profile-page" width="1178" height="409" class="alignnone size-full wp-image-744 img-responsive img-thumbnail"></a></p>
<h2 id="conclusion"><a href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local#conclusion"><span class="heading-link icon ion-link"></span> Conclusion</a></h2>
<p>There you have it! We’ve built a brand new application from scratch and have the ability to let users signup/register and login. We even have support for flash messages, hashing passwords, and requiring login for some sections of our site using route middleware.</p>
<p>Coming up next we’ll be looking at how to take this same structure, and use passport to authenticate with Facebook, Twitter, and Google. After that we’ll look at how we can get all these thing working together in the same application. Users will be able to login with one type of account, and then link their other accounts.</p>
<p>As always, if you see any ways to improve this or need any clarification, sound off in the comments and we’ll respond pretty close to immediately… pretty close.</p>
<div class="alert alert-info">
  <strong>Edit #1</strong>: Changed password hashing to be handled inside user model and asynchronously. <strong>Edit #2</strong>: Changed password hashing to be explicitly called. Helps with future tutorials.
</div>
<div class="alert alert-success">
  This article is part of our <a href="https://scotch.io/series/easy-node-authentication" class="alert-link">Easy Node Authentication</a> series.
<ul>
<li>
      Getting Started and Local Authentication
    </li>
<li>
      <a href="https://scotch.io/tutorials/javascript/easy-node-authentication-facebook" class="alert-link">Facebook</a>
    </li>
<li>
      <a href="https://scotch.io/tutorials/javascript/easy-node-authentication-twitter" class="alert-link">Twitter</a>
    </li>
<li>
      <a href="https://scotch.io/tutorials/javascript/easy-node-authentication-google" class="alert-link">Google</a>
    </li>
<li>
      <a href="https://scotch.io/tutorials/javascript/easy-node-authentication-linking-all-accounts-together" class="alert-link">Linking All Accounts Together</a>
    </li>
<li>
      <a href="https://scotch.io/tutorials/javascript/upgrading-our-easy-node-authentication-series-to-expressjs-4-0" class="alert-link">Upgrading for ExpressJS 4.0</a>
    </li>
</ul>
</div>
<p></p></div></div>

					
<div class="share-stat share-stat-action">
	
			<a href="https://github.com/scotch-io/easy-node-authentication/tree/local" class="btn-primary"> 
			<span class="icon ion-ios-speedometer-outline"></span> View Code
		</a>
	
	
			<a href="http://node-auth.scotch.io/" class="btn-danger">
			<span class="icon ion-ios-game-controller-b-outline"></span> View Demo
		</a>
	
	</div>


											<!-- COURSE LESSON LIST -->
						<div class="lesson-list panel panel-default">
    <div class="panel-heading text-center">
        <h4 class="panel-title">
            <a href="https://scotch.io/courses/easy-node-authentication">
                <span class="ti-agenda"></span>
                Easy Node Authentication            </a>
        </h4>
    </div>  

    <table class="table lesson-list-table table-bordered">
        <tbody>
                <tr class="clickable" href="https://scotch.io/tutorials/easy-node-authentication-setup-and-local">
            <td class="col-xs-1 text-center">
                <a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/Easy Node Authentication_ Setup and Local _ Scotch.html">1</a>
            </td>
            <td class="lesson-list-title">
                <a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/Easy Node Authentication_ Setup and Local _ Scotch.html">
                    Easy Node Authentication: Setup and Local                                                        </a>
            </td>
            <td class="col-xs-2 text-center">
                                <a href="./Easy Node Authentication_ Setup and Local _ Scotch_files/Easy Node Authentication_ Setup and Local _ Scotch.html" class="lesson-length">
                    Read
                </a>    
                            </td>
        </tr>
                <tr class="clickable" href="https://scotch.io/tutorials/easy-node-authentication-facebook">
            <td class="col-xs-1 text-center">
                <a href="https://scotch.io/tutorials/easy-node-authentication-facebook">2</a>
            </td>
            <td class="lesson-list-title">
                <a href="https://scotch.io/tutorials/easy-node-authentication-facebook">
                    Easy Node Authentication: Facebook                                                        </a>
            </td>
            <td class="col-xs-2 text-center">
                                <a href="https://scotch.io/tutorials/easy-node-authentication-facebook" class="lesson-length">
                    Read
                </a>    
                            </td>
        </tr>
                <tr class="clickable" href="https://scotch.io/tutorials/easy-node-authentication-twitter">
            <td class="col-xs-1 text-center">
                <a href="https://scotch.io/tutorials/easy-node-authentication-twitter">3</a>
            </td>
            <td class="lesson-list-title">
                <a href="https://scotch.io/tutorials/easy-node-authentication-twitter">
                    Easy Node Authentication: Twitter                                                        </a>
            </td>
            <td class="col-xs-2 text-center">
                                <a href="https://scotch.io/tutorials/easy-node-authentication-twitter" class="lesson-length">
                    Read
                </a>    
                            </td>
        </tr>
                <tr class="clickable" href="https://scotch.io/tutorials/easy-node-authentication-google">
            <td class="col-xs-1 text-center">
                <a href="https://scotch.io/tutorials/easy-node-authentication-google">4</a>
            </td>
            <td class="lesson-list-title">
                <a href="https://scotch.io/tutorials/easy-node-authentication-google">
                    Easy Node Authentication: Google                                                        </a>
            </td>
            <td class="col-xs-2 text-center">
                                <a href="https://scotch.io/tutorials/easy-node-authentication-google" class="lesson-length">
                    Read
                </a>    
                            </td>
        </tr>
                <tr class="clickable" href="https://scotch.io/tutorials/easy-node-authentication-linking-all-accounts-together">
            <td class="col-xs-1 text-center">
                <a href="https://scotch.io/tutorials/easy-node-authentication-linking-all-accounts-together">5</a>
            </td>
            <td class="lesson-list-title">
                <a href="https://scotch.io/tutorials/easy-node-authentication-linking-all-accounts-together">
                    Easy Node Authentication: Linking All Accounts Together                                                        </a>
            </td>
            <td class="col-xs-2 text-center">
                                <a href="https://scotch.io/tutorials/easy-node-authentication-linking-all-accounts-together" class="lesson-length">
                    Read
                </a>    
                            </td>
        </tr>
                <tr class="clickable" href="https://scotch.io/tutorials/upgrading-our-easy-node-authentication-series-to-expressjs-4-0">
            <td class="col-xs-1 text-center">
                <a href="https://scotch.io/tutorials/upgrading-our-easy-node-authentication-series-to-expressjs-4-0">6</a>
            </td>
            <td class="lesson-list-title">
                <a href="https://scotch.io/tutorials/upgrading-our-easy-node-authentication-series-to-expressjs-4-0">
                    Upgrading Our "Easy Node Authentication" Series to ExpressJS 4.0                                                        </a>
            </td>
            <td class="col-xs-2 text-center">
                                <a href="https://scotch.io/tutorials/upgrading-our-easy-node-authentication-series-to-expressjs-4-0" class="lesson-length">
                    Read
                </a>    
                            </td>
        </tr>
            </tbody></table>
</div>					
				</div>

									<!-- PAGE SECONDARY -->
					<div class="page-secondary">
						<div id="article-author" class="secondary-box clearfix">

	<a href="https://scotch.io/author/chris" class="author-image">
		<img id="author-avatar" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/8a8bf3a2c952984defbd6bb48304b38e(1)" width="300" height="300" class="pull-left">
	</a>
	<div class="author-content">
		<h3>
			<a href="https://scotch.io/author/chris">
				Chris Sevilleja			</a>
						(<a href="https://twitter.com/sevilayha">@sevilayha</a>)
					</h3>

		<p>Design, development, and anything in between that I find interesting.</p>

		<a id="view-contributions" class="btn btn-primary" href="https://scotch.io/author/chris">
			<span class="icon ion-ios-flame-outline"></span> View My Articles
		</a>
	</div>

</div>					</div>

					
					<div class="page-secondary page-secondary-two">
						<div class="article-announcement">
<div class="row">
<div class="col-sm-10 col-sm-offset-1">

    <div class="announcement-img pull-left">
        <a href="https://leanpub.com/mean-machine" onclick="_gaq.push([&#39;_trackEvent&#39;, &#39;Leanpub&#39;, &#39;Click&#39;, &#39;MEAN Machine - Article&#39;]);"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/mean-machine-page.jpeg"></a>
    </div>
    <div class="announcement-content">
        <p><small class="text-muted">scotch.io books presents:</small></p>

        <h3>MEAN Machine</h3>

        <p>Learn Node, Angular, Express, and MongoDB from scratch.<br>No experience necessary.</p>

        <a href="https://leanpub.com/mean-machine" class="btn btn-danger" onclick="_gaq.push([&#39;_trackEvent&#39;, &#39;Leanpub&#39;, &#39;Click&#39;, &#39;MEAN Machine - Article&#39;]);">Learn About the Book <span class="ti-arrow-circle-right"></span></a>
    </div>
        
</div>
</div>
</div>
						<div id="stay-connected" class="text-center secondary-box">

	<div class="connected-container">
		<a class="share-rss sbg-rss" href="https://scotch.io/feed">
			<span class="icon ion-social-rss-outline"></span> Subscribe
		</a>

		<a class="sbg-twitter" href="http://twitter.com/scotch_io"> 
			<span class="icon ion-social-twitter-outline"></span> Follow
		</a>

		<a class="sbg-facebook" href="http://www.facebook.com/scotchdevelopment"> 
			<span class="icon ion-social-facebook-outline"></span> Like
		</a>

		<a class="sbg-googleplus" href="http://plus.google.com/b/113854128330570384219/+ScotchIo/posts">
			<span class="icon ion-social-googleplus-outline"></span> +1
		</a>
	</div>

	<h4><span class="icon ion-ios-email"></span></h4>
	<p>Get valuable tips, articles, and resources straight to your inbox. Every Tuesday.</p>

	<!-- Begin MailChimp Signup Form -->
	<div id="mc_embed_signup">
		<form action="https://scotch.us3.list-manage.com/subscribe/post?u=1c412c864c03eadaf07ccd61e&id=a818d504d4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-inline" target="_blank" novalidate="">
			
		<input type="hidden" name="LOCATION" id="LOCATION" value="article_end">

		<div class="mc-field-group form-group">
			<input type="email" name="EMAIL" class="required email form-control" id="mce-EMAIL" placeholder="Email Address">
		</div>

		<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button btn btn-primary">

		<div id="mce-responses" class="clear">
			<div class="response" id="mce-error-response" style="display:none"></div>
			<div class="response" id="mce-success-response" style="display:none"></div>
		</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
	    <div style="position: absolute; left: -5000px;"><input type="text" name="b_1c412c864c03eadaf07ccd61e_a818d504d4" value=""></div>
	</form>
	</div>
	<!--End mc_embed_signup-->
	
</div>						<div id="comment-section" class="secondary-box">
							<div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 10637px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="dsq-indicator-north" data-disqus-uid="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 870px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 870px !important; max-width: 870px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe><iframe id="dsq-indicator-south" data-disqus-uid="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 870px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 870px !important; max-width: 870px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe></div>
						</div>
					</div>
				
			</div>

		</div>
		<div class="page-sidebar">

						<!-- SIDEBAR -->
			<div class="page-sidebar-inside">
				<div class="sidebar-section ad-side clearfix">
	<div class="ad-sidebar clearfix">
		<div id="bsap_1291897" class="bsarocks bsap_8321ee0e3825ae084dc5408db80d21db"></div>
	</div>
	<div class="ad-sidebar clearfix">
		<div id="bsap_1300581" class="bsarocks bsap_8321ee0e3825ae084dc5408db80d21db"></div>
	</div>
</div>

<div class="sidebar-section sidebar-social clearfix">
	<div class="sidebar-social-box clearfix">
		<div class="sidebar-social-top clearfix">
			<ul class="list-unstyled">
				<li><a href="https://www.facebook.com/scotchdevelopment" class="sbg-facebook">
					<span class="icon ion-social-facebook-outline"></span>
				</a></li>
				<li><a href="https://twitter.com/scotch_io" class="sbg-twitter">
					<span class="icon ion-social-twitter-outline"></span>
				</a></li>
				<li><a href="https://plus.google.com/+ScotchIo/posts" class="sbg-googleplus">
					<span class="icon ion-social-googleplus-outline"></span>
				</a></li>
				<li><a href="https://feeds.feedblitz.com/scotch_io" class="sbg-rss">
					<span class="icon ion-social-rss-outline"></span>
				</a></li>
			</ul>
		</div>
		<div class="sidebar-social-bottom clearfix">
			<div class="text-center">
				<a href="https://scotch.io/books/build-your-first-node-js-app">
					<img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/first-node-app-small.png" class="img-repsonsive">
				</a>
			</div>
			<p>Subscribe and get our FREE eBook: <a href="https://scotch.io/books/build-your-first-node-js-app">Build Your First Node.js App</a></p>
			<!-- Begin MailChimp Signup Form -->
			<div id="mc_embed_signup">
			<form action="https://scotch.us3.list-manage.com/subscribe/post?u=1c412c864c03eadaf07ccd61e&id=a818d504d4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">

			<input type="hidden" name="LOCATION" id="LOCATION" value="sidebar_top">

			<div class="mc-field-group form-group">
				<input type="email" name="EMAIL" class="required email form-control" id="mce-EMAIL" placeholder="Email Address">
			</div>
				<div id="mce-responses" class="clear">
					<div class="response" id="mce-error-response" style="display:none"></div>
					<div class="response" id="mce-success-response" style="display:none"></div>
				</div>
			    <div style="position: absolute; left: -5000px;"><input type="text" name="b_1c412c864c03eadaf07ccd61e_a818d504d4" value=""></div>
				<div class="clear text-center"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button btn btn-primary btn-sm btn-block"></div>
			</form>
			</div>
			<!--End mc_embed_signup-->
		</div>
	</div>
</div>

<div class="sidebar-section sidebar-popular clearfix">
	<h4><span class="icon ion-beer"></span> Popular on Scotch</h4>

	
	<ul>
					<li class="clearfix"><a href="https://scotch.io/tutorials/only-grab-the-files-you-need-while-using-bower">
				<div class="popular-img" style="background-image:url(https://cask.scotch.io/2015/03/bower-get-only-the-files-you-need-376x188.png)"></div>
				<div class="popular-text">Only Grab the Files You Need While Using Bower</div>
			</a></li>
					<li class="clearfix"><a href="https://scotch.io/tutorials/build-a-time-tracker-with-laravel-5-and-angularjs-part-1">
				<div class="popular-img" style="background-image:url(https://cask.scotch.io/2015/03/laravel-angular-time-tracker-1-450x188.jpg)"></div>
				<div class="popular-text">Build a Time Tracker with Laravel 5 and AngularJS – Part 1</div>
			</a></li>
					<li class="clearfix"><a href="https://scotch.io/bar-talk/10-blissful-bootstraps-tools-and-templates-for-quality-jquery-mobile-development">
				<div class="popular-img" style="background-image:url(https://cask.scotch.io/2015/04/10-blissful-bootstrap-tools-450x188.jpg)"></div>
				<div class="popular-text">10 Blissful Bootstrap Tools And Templates For Quality jQuery Mobile Development</div>
			</a></li>
					<li class="clearfix"><a href="https://scotch.io/bar-talk/scotch-io-may-giveaway">
				<div class="popular-img" style="background-image:url(https://cask.scotch.io/2015/05/scotch-io-may-giveaway-450x188.jpg)"></div>
				<div class="popular-text">Scotch.io May Giveaway</div>
			</a></li>
					<li class="clearfix"><a href="https://scotch.io/tutorials/building-a-slack-clone-in-meteor-js-getting-started">
				<div class="popular-img" style="background-image:url(https://cask.scotch.io/2015/05/slack-clone-in-meteor-getting-started-450x188.png)"></div>
				<div class="popular-text">Building a Slack Clone in Meteor.js: Getting Started</div>
			</a></li>
					<li class="clearfix"><a href="https://scotch.io/tutorials/a-beginners-guide-to-composer">
				<div class="popular-img" style="background-image:url(https://cask.scotch.io/2015/03/composer-450x188.jpg)"></div>
				<div class="popular-text">A Beginner’s Guide To Composer</div>
			</a></li>
					<li class="clearfix"><a href="https://scotch.io/tutorials/build-a-time-tracker-with-laravel-5-and-angularjs-part-2">
				<div class="popular-img" style="background-image:url(https://cask.scotch.io/2015/04/laravel-angular-time-tracker-2-450x188.jpg)"></div>
				<div class="popular-text">Build a Time Tracker with Laravel 5 and AngularJS – Part 2</div>
			</a></li>
			</ul>

</div>

<div class="sidebar-section ad-side clearfix text-center">
	<div id="bsap_1300589" class="bsarocks bsap_8321ee0e3825ae084dc5408db80d2d1b"></div>
</div>

<!-- <div class="sidebar-section sidebar-scotch-projects text-center clearfix">
<h4><span class="icon ion-erlenmeyer-flask"></span> Projects By Scotch</h4>
<div class="sidebar-scotch-project-inside">

	<a href="http://bit.ly/1FxJ3TI" class="sidebar-scotch-project">
		<div class="sidebar-scotch-project-img" style="background-image:url(https://cask.scotch.io/2014/12/title_page.jpg);"></div>
		<h5>MEAN Machine</h5>
		<p>The beginner's book to Node and Angular</p>
	</a>

	<a href="http://bit.ly/1PY0ujh" class="sidebar-scotch-project">
		<div class="sidebar-scotch-project-img" style="background-image:url(https://cask.scotch.io/2014/10/banner1.jpg);"></div>
		<h5>Scotch Box</h5>
		<p>A Vagrant LAMP Stack That Just Works</p>
	</a>

	<a href="http://bit.ly/1QJLLK5" class="sidebar-scotch-project">
		<div class="sidebar-scotch-project-img" style="background-image:url(https://cask.scotch.io/2014/10/scotch-panels-cover-1.jpg);"></div>
		<h5>Scotch Panels</h5>
		<p>Dead simple Off Canvas jQuery Plugin</p>
	</a>
</div>
</div> -->

<div class="sidebar-section text-center clearfix">

	<div class="sidebar-section sidebar-announcement">
		<h4 class="text-center">Learn Node and Angular<br>with Our eBook</h4>
		<a href="http://bit.ly/1FxJ3TI" target="_blank"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/mean-machine-page.jpeg" class="img-responsive"></a>
	</div>

	<div class="sidebar-section sidebar-announcement">
		<h4 class="text-center">A Vagrant LAMP Stack<br>That Just works</h4>
		<a href="http://bit.ly/1PY0ujh" target="_blank"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/scotch-box-sidebar.png" class="img-responsive"></a>
	</div>

	<div class="sidebar-section sidebar-announcement">
		<h4 class="text-center">Dead Simple<br>Off-Canvas Panels</h4>
		<a href="http://bit.ly/1QJLLK5" target="_blank"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/scotch-panels-sidebar.png" class="img-responsive"></a>
	</div>

	<div class="sidebar-section sidebar-announcement">
		<h4 class="text-center">Scotch.io Stickers!</h4>
		<a href="http://shop.scotch.io/" target="_blank"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/scotch-stickers.jpg" class="img-responsive"></a>
	</div>

</div>


<div class="sticky-wrapper" style="height: 526px;"><div class="sidebar-sticky stuck" style="left: 1056.078125px;">
		<div class="clearfix">
		<!-- Fixed Sidebar -->
		<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-4625466825098355" data-ad-slot="8619471422"></ins>
		<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script>
	</div>
	
	<div class="sidebar-email sidebar-section sidebar-option hidden">
		<h4>
			<span class="icon ion-ios-email"></span>
			The Newsletter
		</h4>
		<p class="text-center">Subscribe and get our free eBook: <a href="https://scotch.io/books/build-your-first-node-js-app">Build Your First Node App</a>.</p>
		<!-- Begin MailChimp Signup Form -->
		<div id="mc_embed_signup">
		<form action="https://scotch.us3.list-manage.com/subscribe/post?u=1c412c864c03eadaf07ccd61e&id=a818d504d4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">

		<input type="hidden" name="LOCATION" id="LOCATION" value="sidebar_bottom">

		<div class="mc-field-group form-group">
			<input type="email" name="EMAIL" class="required email form-control" id="mce-EMAIL" placeholder="Email Address">
		</div>
			<div id="mce-responses" class="clear">
				<div class="response" id="mce-error-response" style="display:none"></div>
				<div class="response" id="mce-success-response" style="display:none"></div>
			</div>
		    <div style="position: absolute; left: -5000px;"><input type="text" name="b_1c412c864c03eadaf07ccd61e_a818d504d4" value=""></div>
			<div class="clear text-right"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button btn btn-primary btn-sm"></div>
		</form>
		</div>
		<!--End mc_embed_signup-->
	</div>

	<div class="sidebar-section sidebar-announcement sidebar-option">
		<h4 class="text-center">Learn Node and Angular<br>with Our eBook</h4>
		<a href="http://bit.ly/1FxJ3TI" target="_blank"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/mean-machine-page.jpeg" class="img-responsive"></a>
	</div>

<!-- 	<div class="sidebar-section sidebar-announcement sidebar-option hidden">
		<h4 class="text-center">A Vagrant LAMP Stack<br>That Just works</h4>
		<a href="http://bit.ly/1PY0ujh" target="_blank"><img src="https://cask.scotch.io/2015/04/scotch-box-sidebar.png" class="img-responsive"></a>
	</div>

	<div class="sidebar-section sidebar-announcement sidebar-option hidden">
		<h4 class="text-center">Dead Simple<br>Off-Canvas Panels</h4>
		<a href="http://bit.ly/1QJLLK5" target="_blank"><img src="https://cask.scotch.io/2015/04/scotch-panels-sidebar.png" class="img-responsive"></a>
	</div>

	<div class="sidebar-section sidebar-announcement sidebar-option hidden">
		<h4 class="text-center">Scotch.io Stickers!</h4>
		<a href="http://shop.scotch.io" target="_blank"><img src="https://cask.scotch.io/2015/05/scotch-stickers.jpg" class="img-responsive"></a>
	</div> -->

	<div class="sidebar-section sidebar-announcement sidebar-option hidden">
		<div class="sidebar-gray">
			<h4 class="text-center">OSCON (Open Source Convention)</h4>
		</div>
		
		<a href="http://synd.co/1dBXx9Y" rel="nofollow" target="_blank"><img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/Screen_Shot_2015-06-11_at_4.20.25_PM.png" class="img-responsive"></a>

		<div class="sidebar-gray sidebar-gray-bottom">
			<p>If software is what you do, OSCON is where you want to be.<br>
			SAVE 20%. Use code: <strong>SCOTCH</strong></p>
			<a href="http://synd.co/1dBXx9Y" rel="nofollow" class="btn btn-danger">Register Now</a>
		</div>
	</div>

	<div class="sidebar-social">
		<ul class="list-unstyled list-inline">
			<li><a href="https://www.facebook.com/scotchdevelopment" class="sbg-facebook"><i class="icon ion-social-facebook"></i></a></li>
			<li><a href="https://twitter.com/scotch_io" class="sbg-twitter"><i class="icon ion-social-twitter"></i></a></li>
			<li><a href="https://feeds.feedblitz.com/scotch_io" class="sbg-rss"><i class="icon ion-social-rss"></i></a></li>
		</ul>
	</div>

</div></div>			</div>
			
		</div>
	</div>

</article>	

</div><!-- .site-content -->

</div><!-- .site-canvas -->
</div><!-- .site-wrapper -->
</main><!-- #site-main -->

	<footer id="site-footer">
		<div id="footer-content">
		<div class="row">
			<div class="col-md-2 footer-box">
				<nav class="footer-social">
					<ul class="list-unstyled list-inline">
						<li><a href="https://www.facebook.com/scotchdevelopment" class="sbg-facebook">
							<span class="icon ion-social-facebook"></span>
						</a></li>
						<li><a href="https://twitter.com/scotch_io" class="sbg-twitter">
							<span class="icon ion-social-twitter"></span>
						</a></li>
						<li><a href="https://plus.google.com/+ScotchIo/posts" class="sbg-googleplus">
							<span class="icon ion-social-googleplus"></span>
						</a></li>
						<li><a href="http://feeds.feedblitz.com/scotch_io" class="sbg-rss">
							<span class="icon ion-social-rss"></span>
						</a></li>
					</ul>
				</nav>
				<nav class="footer-nav">
					<ul>
						<li><a href="https://scotch.io/license">License</a></li>
						<li><a href="https://scotch.io/advertise">Advertise with Us</a></li>
						<li><a href="https://scotch.io/about">About</a></li>
						<li><a href="https://scotch-slack.herokuapp.com/">Join Us on Slack</a></li>
						<li class="divider"></li>
						<li><a href="http://shop.scotch.io/">Store</a></li>
						<li><a href="https://scotch.io/write-for-us">Write for Us</a></li>
						<li><a href="https://scotch.io/contact-us">Contact Us</a></li>
					</ul>
				</nav>
			</div>
			<div class="col-md-3 footer-box">
				<div class="footer-newsletter">
					<h5>Join the Newsletter</h5>
					<p>Web design/development tutorials and news from around the web.</p>
					<!-- Begin MailChimp Signup Form -->
					<div id="mc_embed_signup">
					<form action="https://scotch.us3.list-manage.com/subscribe/post?u=1c412c864c03eadaf07ccd61e&id=a818d504d4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
						
					<input type="hidden" name="LOCATION" id="LOCATION" value="footer">

					<div class="mc-field-group form-group">
						<input type="email" name="EMAIL" class="required email form-control" id="mce-EMAIL" placeholder="Email Address">
					</div>
						<div id="mce-responses" class="clear">
							<div class="response" id="mce-error-response" style="display:none"></div>
							<div class="response" id="mce-success-response" style="display:none"></div>
						</div>
					    <div style="position: absolute; left: -5000px;"><input type="text" name="b_1c412c864c03eadaf07ccd61e_a818d504d4" value=""></div>
						<div class="clear text-center"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button btn btn-success btn-block"></div>
					</form>
					</div>
					<!--End mc_embed_signup-->
				</div>
			</div>
			<div class="col-md-3 footer-box text-center footer-digital">
				<a href="http://bit.ly/18ib8jR" class="text-danger">
					<img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/digital.svg" width="250" height="22">
					Hire Us
				</a>
			</div>
			<div class="col-md-4 footer-box">
				<div class="footer-announcement">
					<a href="https://leanpub.com/mean-machine">
						<img src="./Easy Node Authentication_ Setup and Local _ Scotch_files/mean-machine-page-e1425418361486-129x1671.jpeg" class="img-responsive">
					</a>
					<div class="footer-announcement-content">
						<h5>Learn Node and Angular</h5>
						<p>Scotch's new JavaScript eBook. Learn the full JavaScript stack.</p>
						<a href="https://leanpub.com/mean-machine" class="btn btn-info">Get the Book</a>
					</div>			
				</div>
			</div>
		</div>
		<div class="text-center footer-copyright">
			<p class="text-muted">Web design and development tutorials for the masses.</p>
			<p>© Scotch.io | Proudly hosted by <a href="https://www.digitalocean.com/?refcode=eaf67777e85b">Digital Ocean</a></p>
		</div>
		</div>
	</footer>
	
<!--[if lt IE 9]>
	<script async data-cfasync="true" src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script async data-cfasync="true" src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<script>
	var disqus_shortname = 'scotchwebdevelopment';
</script>

<script type="text/javascript" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/cleantalk_nocache.js"></script>
<script type="text/javascript" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/scripts.min.js"></script>

	<script>
		// ADSENSE
		var gadsense = document.createElement('script');
			gadsense.type = 'text/javascript';
			gadsense.async = true;
			gadsense.src = '//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';
		(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(gadsense);
	</script>

		<script>
		// BUY SELL ADS
		(function() {
			var bsa = document.createElement('script');
				bsa.type = 'text/javascript';
				bsa.async = true;
				bsa.src = 'https://s3.buysellads.com/ac/bsa.js';
			(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
		}());
	</script>
	
	<script>
		(function() {
			var e = document.createElement("script");
			e.type = "text/javascript";
			e.async = true;
			e.src = "//" + disqus_shortname + ".disqus.com/embed.js";
			(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);
		}());
	</script>

	
	
<script type="text/javascript" src="./Easy Node Authentication_ Setup and Local _ Scotch_files/cleantalk_nocache(1).js"></script>




<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using apc
Object Caching 2341/2728 objects using apc

 Served from: scotch.io @ 2015-06-18 15:46:42 by W3 Total Cache --><span style="height: 20px; width: 40px; position: absolute; opacity: 0.85; z-index: 8675309; display: none; cursor: pointer; border: none; top: 14396px; left: 214px; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAUCAYAAAD/Rn+7AAADU0lEQVR42s2WXUhTYRjHz0VEVPRFUGmtVEaFUZFhHxBhsotCU5JwBWEf1EWEEVHQx4UfFWYkFa2biPJiXbUta33OXFtuUXMzJ4bK3Nqay7m5NeZq6h/tPQ+xU20zugjOxR/+7/O8539+5znnwMtNTExwJtMb3L/fiLv3botCSmUjeCaejTOb39AiFothfHxcFIrHY8RksZjBsckJcOIRMfFsHD/SsbExUYpnI8DR0dGUGjSb0byhEJp5Uqg5CTSzc2CQleJbMEj9/ywBcGRkJEk9DQqouEVQT1sK444yWI9UonmTjGqauVLEIlHa9x8lAMbj8SSpp0rwKGMVvg8P46vbg0C7na8z8JsMcgHe7jlEa+edRhiLy8n/TUMfu6EvLElk+U0WtGwrTrdfAGQf5J8iiK4LVzDU28t8JtMSocf8E+l68myaNFXm/6rXslLK7ay5TOunuRvZWpJuvwAYjUaTpOIWoquuAZ219RTaxKYp9BbjycoN5FvL9qH9TBX5rvoGdJythvXYSTxdtRnWylO/ZdqrLsGwszzhWQ593z2KlAwCYCQSSZJ6ehZ0W7bD9VBLgN0NCqr3qR7R2rBrL3pu3Sb/7nDlz2uy6cG0OXk0GTbZXzNp8trsPAQdTj6frlWzN2DcXZGKQQAMh8NJ6rpyHe+PnkCr/CAFdZyvpfpjuvkifLF9wIt1Wwlo0OHie1RvWrKa93RjzfzliTzPKz3ltB0/Tevmwp14wGUgHAzSOoUEwFAolFaaBSuhnslPRkJexUJtZ6v5HtUeLswl33n1BgEY5fvhs9sJ3FAiT+QYyyvoAQJuD0KBAFRTJNAuz5/s3gJgMBhMJwrVFRThM5tY5zUF/A4X1f2fvQTRLCuBreoim0YmAbqNJryvPEXeeq46kaNdkQ/1HCncbJKPs9ZSv2VHGfWsZ2hfkhKAfr8/pdxWKx4wwD69PmVfNSOL+lr2w+gYqHpWDtXt1xQ8AMlWU0e1lqLd/APRHoP8AJqWrQG9gYxcPMsvSJUvAA4MDKTUJ7MZLaVy8v+qT21tcDx/OemePr0RTkNrur4A6PP5xCgBsL+/X4wiQDpuuVxOeL1eMYmYeDY6sOp0z+B0OuHxeEQhxkJMFosJiSO/UinOI/8Pc+l7KKArAT8AAAAASUVORK5CYII=); background-color: transparent;"></span></body></html>